{"remainingRequest":"/Users/zhangjiaping/Desktop/project/b-tree/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/zhangjiaping/Desktop/project/b-tree/node_modules/@vuepress/core/lib/client/root-mixins/updateMeta.js","dependencies":[{"path":"/Users/zhangjiaping/Desktop/project/b-tree/node_modules/@vuepress/core/lib/client/root-mixins/updateMeta.js","mtime":1582616621495},{"path":"/Users/zhangjiaping/Desktop/project/b-tree/node_modules/cache-loader/dist/cjs.js","mtime":1582616623457},{"path":"/Users/zhangjiaping/Desktop/project/b-tree/node_modules/babel-loader/lib/index.js","mtime":1582616623245}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL1VzZXJzL3poYW5namlhcGluZy9EZXNrdG9wL3Byb2plY3QvYi10cmVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMuJHNzckNvbnRleHQpIHsKICAgICAgdGhpcy4kc3NyQ29udGV4dC50aXRsZSA9IHRoaXMuJHRpdGxlOwogICAgICB0aGlzLiRzc3JDb250ZXh0LmxhbmcgPSB0aGlzLiRsYW5nOwogICAgICB0aGlzLiRzc3JDb250ZXh0LmRlc2NyaXB0aW9uID0gdGhpcy4kcGFnZS5kZXNjcmlwdGlvbiB8fCB0aGlzLiRkZXNjcmlwdGlvbjsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyB1cGRhdGUgdGl0bGUgLyBtZXRhIHRhZ3MKICAgIHRoaXMuY3VycmVudE1ldGFUYWdzID0gbmV3IFNldCgpOwogICAgdGhpcy51cGRhdGVNZXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGVNZXRhOiBmdW5jdGlvbiB1cGRhdGVNZXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZG9jdW1lbnQudGl0bGUgPSB0aGlzLiR0aXRsZTsKICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmxhbmcgPSB0aGlzLiRsYW5nOwogICAgICB2YXIgdXNlck1ldGEgPSB0aGlzLiRwYWdlLmZyb250bWF0dGVyLm1ldGEgfHwgW107CiAgICAgIHZhciBtZXRhID0gdXNlck1ldGEuc2xpY2UoMCk7CiAgICAgIHZhciB1c2VHbG9iYWxEZXNjcmlwdGlvbiA9IHVzZXJNZXRhLmZpbHRlcihmdW5jdGlvbiAobSkgewogICAgICAgIHJldHVybiBtLm5hbWUgPT09ICdkZXNjcmlwdGlvbic7CiAgICAgIH0pLmxlbmd0aCA9PT0gMDsgLy8gIzY2NSBBdm9pZCBkdXBsaWNhdGUgZGVzY3JpcHRpb24gbWV0YSBhdCBydW50aW1lLgoKICAgICAgaWYgKHVzZUdsb2JhbERlc2NyaXB0aW9uKSB7CiAgICAgICAgbWV0YS5wdXNoKHsKICAgICAgICAgIG5hbWU6ICdkZXNjcmlwdGlvbicsCiAgICAgICAgICBjb250ZW50OiB0aGlzLiRkZXNjcmlwdGlvbgogICAgICAgIH0pOwogICAgICB9IC8vIEluY2x1ZGluZyBkZXNjcmlwdGlvbiBtZXRhIGNvbWluZyBmcm9tIFNTUi4KCgogICAgICB2YXIgZGVzY3JpcHRpb25NZXRhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ21ldGFbbmFtZT0iZGVzY3JpcHRpb24iXScpOwoKICAgICAgaWYgKGRlc2NyaXB0aW9uTWV0YXMubGVuZ3RoKSB7CiAgICAgICAgZGVzY3JpcHRpb25NZXRhcy5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMuY3VycmVudE1ldGFUYWdzLmFkZChtKTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdGhpcy5jdXJyZW50TWV0YVRhZ3MgPSBuZXcgU2V0KHVwZGF0ZU1ldGFUYWdzKG1ldGEsIHRoaXMuY3VycmVudE1ldGFUYWdzKSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgJHBhZ2U6IGZ1bmN0aW9uICRwYWdlKCkgewogICAgICB0aGlzLnVwZGF0ZU1ldGEoKTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB1cGRhdGVNZXRhVGFncyhudWxsLCB0aGlzLmN1cnJlbnRNZXRhVGFncyk7CiAgfQp9OwoKZnVuY3Rpb24gdXBkYXRlTWV0YVRhZ3MobWV0YSwgY3VycmVudCkgewogIGlmIChjdXJyZW50KSB7CiAgICBfdG9Db25zdW1hYmxlQXJyYXkoY3VycmVudCkuZm9yRWFjaChmdW5jdGlvbiAoYykgewogICAgICBkb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKGMpOwogICAgfSk7CiAgfQoKICBpZiAobWV0YSkgewogICAgcmV0dXJuIG1ldGEubWFwKGZ1bmN0aW9uIChtKSB7CiAgICAgIHZhciB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdtZXRhJyk7CiAgICAgIE9iamVjdC5rZXlzKG0pLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIHRhZy5zZXRBdHRyaWJ1dGUoa2V5LCBtW2tleV0pOwogICAgICB9KTsKICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0YWcpOwogICAgICByZXR1cm4gdGFnOwogICAgfSk7CiAgfQp9"},{"version":3,"sources":["/Users/zhangjiaping/Desktop/project/b-tree/node_modules/@vuepress/core/lib/client/root-mixins/updateMeta.js"],"names":["created","$ssrContext","title","$title","lang","$lang","description","$page","$description","mounted","currentMetaTags","Set","updateMeta","methods","document","documentElement","userMeta","frontmatter","meta","slice","useGlobalDescription","filter","m","name","length","push","content","descriptionMetas","querySelectorAll","forEach","add","updateMetaTags","watch","beforeDestroy","current","c","head","removeChild","map","tag","createElement","Object","keys","key","setAttribute","appendChild"],"mappings":";;;;;;;;;;;;;;AAAA,eAAe;AACbA,EAAAA,OADa,qBACF;AACT,QAAI,KAAKC,WAAT,EAAsB;AACpB,WAAKA,WAAL,CAAiBC,KAAjB,GAAyB,KAAKC,MAA9B;AACA,WAAKF,WAAL,CAAiBG,IAAjB,GAAwB,KAAKC,KAA7B;AACA,WAAKJ,WAAL,CAAiBK,WAAjB,GAA+B,KAAKC,KAAL,CAAWD,WAAX,IAA0B,KAAKE,YAA9D;AACD;AACF,GAPY;AASbC,EAAAA,OATa,qBASF;AACT;AACA,SAAKC,eAAL,GAAuB,IAAIC,GAAJ,EAAvB;AACA,SAAKC,UAAL;AACD,GAbY;AAebC,EAAAA,OAAO,EAAE;AACPD,IAAAA,UADO,wBACO;AAAA;;AACZE,MAAAA,QAAQ,CAACZ,KAAT,GAAiB,KAAKC,MAAtB;AACAW,MAAAA,QAAQ,CAACC,eAAT,CAAyBX,IAAzB,GAAgC,KAAKC,KAArC;AACA,UAAMW,QAAQ,GAAG,KAAKT,KAAL,CAAWU,WAAX,CAAuBC,IAAvB,IAA+B,EAAhD;AACA,UAAMA,IAAI,GAAGF,QAAQ,CAACG,KAAT,CAAe,CAAf,CAAb;AACA,UAAMC,oBAAoB,GAAGJ,QAAQ,CAACK,MAAT,CAAgB,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACC,IAAF,KAAW,aAAf;AAAA,OAAjB,EAA+CC,MAA/C,KAA0D,CAAvF,CALY,CAOZ;;AACA,UAAIJ,oBAAJ,EAA0B;AACxBF,QAAAA,IAAI,CAACO,IAAL,CAAU;AAAEF,UAAAA,IAAI,EAAE,aAAR;AAAuBG,UAAAA,OAAO,EAAE,KAAKlB;AAArC,SAAV;AACD,OAVW,CAYZ;;;AACA,UAAMmB,gBAAgB,GAAGb,QAAQ,CAACc,gBAAT,CAA0B,0BAA1B,CAAzB;;AACA,UAAID,gBAAgB,CAACH,MAArB,EAA6B;AAC3BG,QAAAA,gBAAgB,CAACE,OAAjB,CAAyB,UAAAP,CAAC;AAAA,iBAAI,KAAI,CAACZ,eAAL,CAAqBoB,GAArB,CAAyBR,CAAzB,CAAJ;AAAA,SAA1B;AACD;;AAED,WAAKZ,eAAL,GAAuB,IAAIC,GAAJ,CAAQoB,cAAc,CAACb,IAAD,EAAO,KAAKR,eAAZ,CAAtB,CAAvB;AACD;AApBM,GAfI;AAsCbsB,EAAAA,KAAK,EAAE;AACLzB,IAAAA,KADK,mBACI;AACP,WAAKK,UAAL;AACD;AAHI,GAtCM;AA4CbqB,EAAAA,aA5Ca,2BA4CI;AACfF,IAAAA,cAAc,CAAC,IAAD,EAAO,KAAKrB,eAAZ,CAAd;AACD;AA9CY,CAAf;;AAiDA,SAASqB,cAAT,CAAyBb,IAAzB,EAA+BgB,OAA/B,EAAwC;AACtC,MAAIA,OAAJ,EAAa;AACX,uBAAIA,OAAJ,EAAaL,OAAb,CAAqB,UAAAM,CAAC,EAAI;AACxBrB,MAAAA,QAAQ,CAACsB,IAAT,CAAcC,WAAd,CAA0BF,CAA1B;AACD,KAFD;AAGD;;AACD,MAAIjB,IAAJ,EAAU;AACR,WAAOA,IAAI,CAACoB,GAAL,CAAS,UAAAhB,CAAC,EAAI;AACnB,UAAMiB,GAAG,GAAGzB,QAAQ,CAAC0B,aAAT,CAAuB,MAAvB,CAAZ;AACAC,MAAAA,MAAM,CAACC,IAAP,CAAYpB,CAAZ,EAAeO,OAAf,CAAuB,UAAAc,GAAG,EAAI;AAC5BJ,QAAAA,GAAG,CAACK,YAAJ,CAAiBD,GAAjB,EAAsBrB,CAAC,CAACqB,GAAD,CAAvB;AACD,OAFD;AAGA7B,MAAAA,QAAQ,CAACsB,IAAT,CAAcS,WAAd,CAA0BN,GAA1B;AACA,aAAOA,GAAP;AACD,KAPM,CAAP;AAQD;AACF","sourcesContent":["export default {\n  created () {\n    if (this.$ssrContext) {\n      this.$ssrContext.title = this.$title\n      this.$ssrContext.lang = this.$lang\n      this.$ssrContext.description = this.$page.description || this.$description\n    }\n  },\n\n  mounted () {\n    // update title / meta tags\n    this.currentMetaTags = new Set()\n    this.updateMeta()\n  },\n\n  methods: {\n    updateMeta () {\n      document.title = this.$title\n      document.documentElement.lang = this.$lang\n      const userMeta = this.$page.frontmatter.meta || []\n      const meta = userMeta.slice(0)\n      const useGlobalDescription = userMeta.filter(m => m.name === 'description').length === 0\n\n      // #665 Avoid duplicate description meta at runtime.\n      if (useGlobalDescription) {\n        meta.push({ name: 'description', content: this.$description })\n      }\n\n      // Including description meta coming from SSR.\n      const descriptionMetas = document.querySelectorAll('meta[name=\"description\"]')\n      if (descriptionMetas.length) {\n        descriptionMetas.forEach(m => this.currentMetaTags.add(m))\n      }\n\n      this.currentMetaTags = new Set(updateMetaTags(meta, this.currentMetaTags))\n    }\n  },\n\n  watch: {\n    $page () {\n      this.updateMeta()\n    }\n  },\n\n  beforeDestroy () {\n    updateMetaTags(null, this.currentMetaTags)\n  }\n}\n\nfunction updateMetaTags (meta, current) {\n  if (current) {\n    [...current].forEach(c => {\n      document.head.removeChild(c)\n    })\n  }\n  if (meta) {\n    return meta.map(m => {\n      const tag = document.createElement('meta')\n      Object.keys(m).forEach(key => {\n        tag.setAttribute(key, m[key])\n      })\n      document.head.appendChild(tag)\n      return tag\n    })\n  }\n}\n"]}]}